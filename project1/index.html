<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Tic Tac Toe </title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <nav>
        <ul>
            <li>My Tic Tac Toe</li>
        </ul>
    </nav>

    <div class="gameContainer">
        <div class="container"> 
            <div class="line"></div>
            <div class="box bt-0 bl-0"><span class="textbox"></span></div>
            <div class="box bt-0"><span class="textbox"></span></div>
            <div class="box bt-0 br-0"><span class="textbox"></span></div>
            <div class="box bl-0"><span class="textbox"></span></div>
            <div class="box"><span class="textbox"></span></div>
            <div class="box br-0"><span class="textbox"></span></div>
            <div class="box bb-0 bl-0"><span class="textbox"></span></div>
            <div class="box bb-0"><span class="textbox"></span></div>
            <div class="box bb-0 br-0"><span class="textbox"></span></div>
        </div>


        <div class="gameinfo">
            <h2>Welcome to Tic Tac Toe Game</h2>
            <div>
                <span class="info">Turn for X</span>
            </div>

            <div id="imagebox">
                <img src="win gif.gif" alt="image">
            </div>

            <button id="reset">Reset</button>
        </div>
    </div>



    <script>
        console.log('Welcome to tic tac toe');
        let gameover=false;

        let turn ="X";
        // Function to change the turn
        const changeTurn = ()=>{
            return turn === "X" ?"0":"X";
        }

        // Function to ckeck who win
        const checkWin = () =>{
            let textbox=document.getElementsByClassName('textbox');
            let wins = [
                [0,1,2, 5, 5, 0],
                [3,4,5, 5 ,15 ,0],
                [6,7,8, 5 ,25,0],
                [0,3,6, -5, 15,90],
                [1,4,7,5,15,90],
                [2,5,8,15,15,90],
                [0,4,8,10,16,45],
                [2,4,6,5,15,135],
            ]
            wins.forEach(e =>{
                if((textbox[e[0]].innerText===textbox[e[1]].innerText) && (textbox[e[2]].innerText===textbox[e[1]].innerText) && (textbox[e[0]].innerText !== "") )
                {
                    document.querySelector('.info').innerText = textbox[e[0]].innerText + " Won ";
                    gameover =true;
                    document.querySelector("#imagebox").getElementsByTagName('img')[0].style.width = "200px";
                    document.querySelector('.line').style.width ="20vw";
                    document.querySelector('.line').style.transform = `translate(${e[3]}vw , ${e[4]}vw) rotate(${e[5]}deg)`
                }
            
            })

        }

        // Main game logic

        let boxes = document.getElementsByClassName("box");
        Array.from(boxes).forEach(element =>{
            let textbox=element.querySelector('.textbox');
            element.addEventListener('click',()=>{
                if(textbox.innerText==='')
                {
                    textbox.innerText=turn;
                     turn =changeTurn();
                    checkWin();
                    if(!gameover)
                    {
                        document.getElementsByClassName('info')[0].innerText = "Turn for "+turn;
                    }
                }
            })
        })

        //add on click listner to reset
        reset.addEventListener('click', ()=>{
            let textbox = document.querySelectorAll('.textbox');
            Array.from(textbox).forEach(element =>{
                element.innerText = ""
            });

            turn="X";
            gameover=false;
            document.querySelector('.line').style.width ="0vw";
            document.getElementsByClassName('info')[0].innerText = "Turn for "+turn;
            

        })
    </script>
</body>
</html>